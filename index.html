<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <script src="http://cdn.jsdelivr.net/phaser/2.3.0/phaser.min.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {

        var game = new Phaser.Game(800, 800, Phaser.AUTO, '', { preload: preload, create: create });

        function preload () {

            game.load.image('logo', 'phaser.png');

        }

        function create () {
            var fieldWidth = 800;
            var fieldHeight = 800;
            var infieldRadius = 250;
            var basesRadius = 150;
            
            var homePlateX = 400;
            var homePlateY = fieldHeight - 50;
            
            var graphics = game.add.graphics(0, 0);

            // Grass
            graphics.beginFill(0x00aa00, 1);
            graphics.drawRect(0, 0, 800, 800);
            graphics.endFill();
            
            // Infield
            graphics.lineStyle(1, 0x8B4513, 1);
            graphics.beginFill(0x8B4513, 1);
            
            graphics.moveTo(homePlateX, homePlateY);
            graphics.lineTo(homePlateX - infieldRadius, homePlateY - infieldRadius);
            graphics.lineTo(homePlateX + infieldRadius, homePlateY - infieldRadius);
            graphics.lineTo(homePlateX, homePlateY);
            graphics.arc(homePlateX, homePlateY, Math.sqrt(infieldRadius * infieldRadius + infieldRadius * infieldRadius), game.math.degToRad(225), game.math.degToRad(315));
            graphics.endFill();
            
            // Bases
            DrawBase(homePlateX, homePlateY, graphics);
            DrawBase(homePlateX + basesRadius, homePlateY - basesRadius, graphics);
            DrawBase(homePlateX, homePlateY - basesRadius * 2, graphics);
            DrawBase(homePlateX - basesRadius, homePlateY - basesRadius, graphics);
            
            // Foul lines
            graphics.lineStyle(2, 0xffffff, 1);
            graphics.moveTo(homePlateX, homePlateY);
            graphics.lineTo(homePlateX - fieldWidth * 0.5, homePlateY - fieldWidth * 0.5);
            graphics.moveTo(homePlateX, homePlateY);
            graphics.lineTo(homePlateX + fieldWidth * 0.5, homePlateY - fieldWidth * 0.5);
            
            // Back wall
            graphics.arc(homePlateX, homePlateY, Math.sqrt((fieldWidth * 0.5) * (fieldWidth * 0.5) + (fieldWidth * 0.5) * (fieldWidth * 0.5)), 0, 360);
        }

        function DrawBase(cx, cy, graphics) {
            graphics.lineStyle(0, 0xffffff, 1);
            graphics.beginFill(0xffffff, 1);
            graphics.drawRect(cx - 7, cy - 7, 14, 14);
            graphics.endFill();
        }
    };

    </script>

    </body>
</html>
